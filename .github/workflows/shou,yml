name: List All Environment Variables

on:
  workflow_dispatch: # 允许手动触发工作流
  push:
    branches:
      - main # 或者你希望在哪个分支push时触发

jobs:
  list_env_vars:
    runs-on: ubuntu-latest

    # ⚠️ 关键点：你需要在这个 jobs 或 steps 级别设置那些你想要查看的变量和 secrets
    # 否则，Python脚本就不会看到它们。
    # 例如，如果你的 Cloudflare Worker 的环境变量是 SECRET_DOMAIN, SECRET_USER, SECRET_PASS
    # 你需要通过 env: 块将它们作为工作流环境变量暴露出来。
    env:
      # 这是把你仓库里设置的 Secrets 映射到工作流的环境变量中
      # 只有这样，Python脚本才能通过 os.environ 访问到它们。
      # 请将 YOUR_... 替换为你在 GitHub 仓库 Secrets 中实际配置的名称。
      DOMAIN: ${{ secrets.DOMAIN }}
      USER: ${{ secrets.USER }}
      PASS: ${{ secrets.PASS }}
      TGTOKEN: ${{ secrets.TGTOKEN }}
      TGID: ${{ secrets.TGID }}
      # 多个账号的配置
      DOMAIN1: ${{ secrets.DOMAIN1 }}
      USER1: ${{ secrets.USER1 }}
      PASS1: ${{ secrets.PASS1 }}
      TGTOKEN1: ${{ secrets.TGTOKEN1 }}
      TGID1: ${{ secrets.TGID1 }}
      # ... 依此类推，把所有你 Cloudflare Worker 用到的环境变量都列在这里
      # ZH2: ${{ secrets.ZH2 }}
      # MM2: ${{ secrets.MM2 }}
      # TGID2: ${{ secrets.TGID2 }}

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.x'

    - name: Run Python script to list all environment variables
      run: python list_all_env_vars.py

